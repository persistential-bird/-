#define  _CRT_SECURE_NO_WARNINGS 1
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <errno.h>

char *GetMemory(void) 
{
	char p[] = "hello world";
	return p;
}
void Test(void) 
{
	char *str = NULL;
	str = GetMemory();
	printf(str);
}
int main()//栈区内存销毁 程序err
{
	Test();
	return 0;
}


void GetMemory(char **p, int num) 
{
	*p = (char *)malloc(num);
}
void Test(void)
{
	char *str = NULL;
	GetMemory(&str,100);
	strcpy(str, "hello");
	printf(str);
	//改
	free(str);
	str = NULL;
}
int main()//存在内存泄漏
{
	Test();
	return 0;
}

void Test(void) 
{
	char *str = (char *)malloc(100);
	strcpy(str, "hello");
	free(str);//free释放str指向的空间后，并不会把str置为NULL
	//str = NULL;// 改
	if (str != NULL) //越界访问
	{
		strcpy(str, "world");
		printf(str);
	}
}
int main()
{
	Test();
	return 0;
}
